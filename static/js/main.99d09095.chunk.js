(this["webpackJsonphospital-test-task"]=this["webpackJsonphospital-test-task"]||[]).push([[0],{59:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),r=n(20),c=n.n(r),a=n(98),d=n(52),s=n(99),l=n(18),m=(n(59),n(5)),j=n(8),p=n(2);function u(e){return Object(p.jsx)(j.b,{path:e.path,render:function(t){return Object(p.jsx)(e.component,Object(m.a)(Object(m.a)({},t),{},{state:e.state,routes:e.routes}))}})}function b(e){var t=e.routes.map((function(t,n){return Object(p.jsx)(u,Object(m.a)({state:e.state},t),n)}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(f,{}),Object(p.jsx)(j.d,{children:t})]})}function f(){var e=Object(j.g)().pathname;return Object(o.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var h=n(96),O=n(92),g=n(94),x=n(90),y=n(93),_=n(88),v=n(91),w=n(86),N=Object(w.a)((function(e){return{table:{minWidth:e.spacing(100)},root:{marginTop:e.spacing(5),marginBottom:e.spacing(5)}}})),F=n(6),k=Object(F.a)((function(e){return{root:{"&:hover":{backgroundColor:e.palette.action.hover,cursor:"pointer"},textDecoration:"none"}}}))(_.a),E=n(89),D=Object(F.a)((function(e){return{head:{backgroundColor:e.palette.primary.main,color:e.palette.common.white},body:{fontSize:e.spacing(2)}}}))(E.a),T=function(e){var t=e.rows,n=e.headerRow,o=N(),i=t.map((function(e){return Object(p.jsxs)(k,{component:l.b,to:e.url,children:[Object(p.jsx)(D,{children:e.id}),Object(p.jsx)(D,{children:e.name}),Object(p.jsx)(D,{align:"right",children:e.bdate})]},e.id)}));return Object(p.jsx)(x.a,{component:v.a,className:o.root,children:Object(p.jsxs)(O.a,{className:o.table,"aria-label":"customized table",children:[Object(p.jsx)(y.a,{children:Object(p.jsxs)(_.a,{children:[Object(p.jsx)(D,{children:n[0]}),Object(p.jsx)(D,{children:n[1]}),Object(p.jsx)(D,{align:"right",children:n[2]})]})}),Object(p.jsx)(g.a,{children:i})]})})},I=n(95),B=Object(w.a)((function(e){return{table:{minWidth:700},root:{marginTop:e.spacing(5),marginBottom:e.spacing(5)},row:{height:e.spacing(10),marginTop:0,marginBottom:e.spacing(5)},rows:{padding:0}}})),S=function(e){for(var t=e.count,n=B(),o=[],i=0;i<t;i++)o.push(Object(p.jsxs)(k,{children:[Object(p.jsx)(D,{children:Object(p.jsx)(I.a,{})}),Object(p.jsx)(D,{children:Object(p.jsx)(I.a,{})}),Object(p.jsx)(D,{align:"right",children:Object(p.jsx)(I.a,{})})]}));return Object(p.jsx)(x.a,{component:v.a,className:n.root,children:Object(p.jsxs)(O.a,{className:n.table,"aria-label":"customized table",children:[Object(p.jsx)(y.a,{children:Object(p.jsxs)(_.a,{children:[Object(p.jsx)(D,{children:"loading..."}),Object(p.jsx)(D,{}),Object(p.jsx)(D,{})]})}),Object(p.jsx)(g.a,{className:n.rows,children:o})]})})},W=n(14),L=n(26),R=n.n(L),z=n(36),C={"/api/employees":[{id:1,firstName:"\u041b\u0435\u043e\u043d\u0438\u0434",lastName:"\u0421\u0442\u0430\u0440\u043e\u043a\u0430\u0434\u043e\u043c\u0441\u043a\u0438\u0439",middleName:"\u041c\u0438\u0445\u0430\u0439\u043b\u043e\u0432\u0438\u0447",birthDate:"1875-03-27",phone:"+79975669545"},{id:2,firstName:"\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440",lastName:"\u0414\u0435\u043c\u0438\u0445\u043e\u0432",middleName:"\u041f\u0435\u0442\u0440\u043e\u0432\u0438\u0447",birthDate:"1916-06-18",phone:"+74951263366"},{id:3,firstName:"\u0412\u0438\u043a\u0442\u043e\u0440",lastName:"\u041a\u0430\u043b\u043d\u0431\u0435\u0440\u0437",middleName:"\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0438\u043d\u043e\u0432\u0438\u0447",birthDate:"1928-06-02",phone:"+37156698963"},{id:4,firstName:"\u0410\u043b\u043e\u0438\u0441",lastName:"\u0410\u043b\u044c\u0446\u0433\u0435\u0439\u043c\u0435\u0440",middleName:"\u042d\u0434\u0443\u0430\u0440\u0434\u043e\u0432\u0438\u0447",birthDate:"1864-06-14",phone:"+15559665599"},{id:5,firstName:"\u0410\u0432\u0438\u0446\u0435\u043d\u043d\u0430",lastName:"\u0421\u0438\u043d\u0430",middleName:"\u0410\u0431\u0443 \u0410\u043b\u0438 \u0418\u0431\u043d",birthDate:"980-08-23",phone:"+15559171855"},{id:6,firstName:"\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440",lastName:"\u0424\u043b\u0435\u043c\u0438\u043d\u0433",middleName:"\u0425\u0443\u0433\u043e\u0432\u0438\u0447",birthDate:"1881-08-06",phone:"+4569988569"}],"/api/employees/worklog":[{id:1,employee_id:1,from:"2021-03-04 04:44:44",to:"2021-03-04 06:46:09"},{id:2,employee_id:1,from:"2021-03-04 06:55:01",to:"2021-03-04 08:13:10"},{id:3,employee_id:1,from:"2021-03-04 09:11:45",to:"2021-03-04 10:55:34"},{id:4,employee_id:1,from:"2021-03-04 11:31:54",to:"2021-03-04 13:36:34"},{id:5,employee_id:1,from:"2021-03-04 14:40:52",to:"2021-03-04 21:31:27"},{id:6,employee_id:1,from:"2021-03-04 21:32:16",to:"2021-03-04 22:13:47"},{id:7,employee_id:1,from:"2021-03-04 22:44:21",to:"2021-03-04 22:47:15"},{id:8,employee_id:1,from:"2021-03-04 23:27:07",to:"2021-03-04 23:41:45"},{id:9,employee_id:1,from:"2021-03-04 23:41:54",to:"2021-03-04 23:44:51"},{id:10,employee_id:1,from:"2021-03-04 23:53:00",to:"2021-04-04 01:15:22"},{id:11,employee_id:2,from:"2021-03-04 03:44:44",to:"2021-03-04 03:46:09"},{id:12,employee_id:2,from:"2021-03-04 03:55:01",to:"2021-03-04 08:13:10"},{id:13,employee_id:2,from:"2021-03-04 09:11:43",to:"2021-03-04 10:55:37"},{id:14,employee_id:2,from:"2021-03-04 10:56:54",to:"2021-03-04 13:36:34"},{id:15,employee_id:2,from:"2021-03-04 13:40:52",to:"2021-03-04 15:31:27"},{id:16,employee_id:2,from:"2021-03-04 15:32:16",to:"2021-03-04 16:13:47"},{id:17,employee_id:3,from:"2021-03-04 00:00:16",to:"2021-03-04 12:00:47"},{id:18,employee_id:3,from:"2021-03-04 12:33:56",to:"2021-03-04 20:11:11"},{id:19,employee_id:4,from:"2021-03-04 00:12:12",to:"2021-03-04 04:07:09"},{id:20,employee_id:4,from:"2021-03-04 06:33:25",to:"2021-03-04 08:56:12"},{id:21,employee_id:4,from:"2021-03-04 09:02:45",to:"2021-03-04 10:11:11"},{id:22,employee_id:4,from:"2021-03-04 11:12:10",to:"2021-03-04 13:36:34"},{id:23,employee_id:4,from:"2021-03-04 13:16:52",to:"2021-03-04 14:31:27"},{id:24,employee_id:4,from:"2021-03-04 16:32:16",to:"2021-03-04 19:13:59"},{id:25,employee_id:4,from:"2021-03-04 19:44:21",to:"2021-03-04 22:54:15"},{id:26,employee_id:4,from:"2021-03-04 23:27:19",to:"2021-03-04 23:41:30"},{id:27,employee_id:5,from:"2021-03-04 11:12:12",to:"2021-03-04 12:07:09"},{id:28,employee_id:5,from:"2021-03-04 12:32:25",to:"2021-03-04 12:56:13"},{id:29,employee_id:5,from:"2021-03-04 14:02:17",to:"2021-03-04 14:11:08"},{id:30,employee_id:5,from:"2021-03-04 15:12:19",to:"2021-03-04 16:33:33"},{id:31,employee_id:5,from:"2021-03-04 18:25:52",to:"2021-03-04 20:31:12"},{id:32,employee_id:5,from:"2021-03-04 20:32:20",to:"2021-03-04 21:21:21"},{id:33,employee_id:5,from:"2021-03-04 22:44:21",to:"2021-03-04 22:54:15"},{id:34,employee_id:5,from:"2021-03-04 22:59:19",to:"2021-03-04 23:29:30"},{id:35,employee_id:6,from:"2021-03-04 02:15:44",to:"2021-03-04 04:46:09"},{id:36,employee_id:6,from:"2021-03-04 17:26:01",to:"2021-03-04 08:17:10"},{id:37,employee_id:6,from:"2021-03-04 09:29:45",to:"2021-03-04 11:32:34"},{id:38,employee_id:6,from:"2021-03-04 11:39:07",to:"2021-03-04 13:39:07"},{id:39,employee_id:6,from:"2021-03-04 14:15:52",to:"2021-03-04 19:01:08"},{id:40,employee_id:6,from:"2021-03-04 19:32:47",to:"2021-03-04 20:55:47"},{id:41,employee_id:6,from:"2021-03-04 22:59:00",to:"2021-03-04 23:09:15"},{id:42,employee_id:6,from:"2021-03-04 23:27:05",to:"2021-03-04 23:30:45"},{id:43,employee_id:6,from:"2021-03-04 23:30:54",to:"2021-03-04 23:50:01"},{id:44,employee_id:6,from:"2021-04-04 00:53:00",to:"2021-04-04 04:15:22"}]};function V(e){var t;return t=C[e],new Promise((function(e,n){return setTimeout(t?e:n,500,t)}))}function M(){return V("/api/employees")}var U="emplTableToggleIsFetching",A="emplTableSetEmployees",J="emplTableReset",G=function(e){return{type:U,isFetching:e}},H=function(e){return{type:A,data:e}},P={isFetching:!0,data:[],headerData:["ID","Full name","Date of Birth"]},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(m.a)(Object(m.a)({},e),{},{isFetching:t.isFetching});case A:return Object(m.a)(Object(m.a)({},e),{},{data:t.data.map((function(e){var t=e.birthDate.split("-"),n="".concat(t[2],".").concat(t[1],".").concat(t[0]);return{id:e.id,name:"".concat(e.lastName," ").concat(e.firstName," ").concat(e.middleName),bdate:n}}))});case J:return Object(m.a)(Object(m.a)({},e),{},{isFetching:!0});default:return e}},q=function(e){var t=Object(W.b)(),n=Object(W.c)((function(e){return e.empl.data})),i=Object(W.c)((function(e){return e.empl.isFetching})),r=Object(W.c)((function(e){return e.empl.headerData}));Object(o.useEffect)((function(){return t(function(){var e=Object(z.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(G(!0)),e.next=3,M();case 3:n=e.sent,t(H(n)),t(G(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(){t({type:J})}}),[]);var c=n.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{url:"/employees/".concat(e.id)})}));return Object(p.jsx)(p.Fragment,{children:i?Object(p.jsx)(S,{count:5}):Object(p.jsx)(T,{rows:c,headerRow:r})})},K=function(e){return Object(p.jsx)(h.a,{maxWidth:"md",children:Object(p.jsx)(q,{})})},Q=n(100),X=Object(w.a)((function(e){return{root:{marginTop:e.spacing(3),marginBottom:e.spacing(3)}}})),Z=function(e){var t=e.text,n=e.toUrl,o=X();return Object(p.jsx)(Q.a,{variant:"contained",color:"primary",className:o.root,component:l.b,to:n,children:t})},$=Object(w.a)((function(e){return{table:{minWidth:e.spacing(100)},root:{marginTop:e.spacing(5),marginBottom:e.spacing(5)},red:{color:"red"},row:{"&:hover":{cursor:"default"}}}})),ee=function(e){var t=e.rows,n=e.headerRow,o=$(),i=t.map((function(e){return Object(p.jsxs)(k,{className:o.row,children:[Object(p.jsx)(D,{align:"right",children:e.from}),Object(p.jsx)(D,{align:"left",className:e.isViolation&&o.red,children:"".concat(e.to," (").concat(e.countOtherEmployeesOnWork," another employee)")})]},e.id)}));return Object(p.jsx)(x.a,{component:v.a,className:o.root,children:Object(p.jsxs)(O.a,{className:o.table,"aria-label":"customized table",children:[Object(p.jsx)(y.a,{children:Object(p.jsxs)(_.a,{children:[Object(p.jsx)(D,{align:"right",children:n[0]}),Object(p.jsx)(D,{align:"left",children:n[1]})]})}),Object(p.jsx)(g.a,{children:i})]})})},te="emplSingleToggleIsFetching",ne="emplSingleSetWorkLog",oe="emplSingleReset",ie="emplSingleGetEmployeeInfo",re="emplSingleSetData",ce=function(e){return{type:te,isFetching:e}},ae=function(e){return{type:ne,data:e}},de=function(e){return{type:re,data:e}},se=function(e,t){return{type:ie,allData:e,id:t}},le=function(e){var t=e.split(" "),n=t[1].split(":"),o=t[0].split("-");return new Date(o[0],o[1],o[2],n[0],n[1],n[2]).getTime()},me=function(e){var t=new Date;t.setTime(e);var n=je(t.getDate()),o=je(t.getMonth()),i=t.getFullYear(),r=je(t.getHours()),c=je(t.getMinutes()),a=je(t.getSeconds());return"".concat(n,".").concat(o,".").concat(i," ").concat(r,":").concat(c,":").concat(a)},je=function(e){return("0"+e).slice(-2)},pe={minCountAnotherEmployees:2,isFetching:!0,isFindById:!1,employeeInfo:{},workLog:[],data:[],headerData:["From","To"]},ue=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case re:return e=Object(m.a)(Object(m.a)({},t),{},{data:n.data.map((function(e){return{id:e.id,from:e.from,to:e.to,isViolation:e.isViolation,countOtherEmployeesOnWork:e.countOtherEmployeesOnWork}}))});case ie:var o=n.allData.map((function(e){if(e.id==n.id)return{name:"".concat(e.lastName," ").concat(e.firstName," ").concat(e.middleName),phone:e.phone}})),i=o.filter((function(e){return void 0!==e}));return e=i.length>0?Object(m.a)(Object(m.a)({},t),{},{employeeInfo:i[0],isFindById:!0}):Object(m.a)(Object(m.a)({},t),{},{isFindById:!1});case te:return e=Object(m.a)(Object(m.a)({},t),{},{isFetching:n.isFetching});case ne:return e=Object(m.a)(Object(m.a)({},t),{},{workLog:n.data.map((function(e){return{id:e.id,emp_id:e.employee_id,from:le(e.from),to:le(e.to)}}))}),console.log(e.workLog),e;case oe:case oe:return e=Object(m.a)(Object(m.a)({},t),{},{isFetching:!0});default:return t}},be=function(e){var t=e.id,n=Object(W.b)(),i=Object(W.c)((function(e){return e.singleEmpl.data})),r=Object(W.c)((function(e){return e.singleEmpl.isFetching})),c=Object(W.c)((function(e){return e.singleEmpl.headerData})),a=Object(W.c)((function(e){return e.singleEmpl.isFindById})),d=Object(W.c)((function(e){return e.singleEmpl.employeeInfo}));return Object(o.useEffect)((function(){return n(function(e){return function(){var t=Object(z.a)(R.a.mark((function t(n,o){var i,r,c,a;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(ce(!0)),t.next=3,M();case 3:return i=t.sent,n(se(i,e)),t.next=7,V("/api/employees/worklog");case 7:r=t.sent,n(ae(r)),c=o().singleEmpl.workLog.map((function(t){if(t.emp_id==e){var n,i=[];return o().singleEmpl.workLog.forEach((function(n){n.emp_id!=e&&t.to>n.from&&t.to<n.to&&-1===i.indexOf(n.emp_id)&&i.push(n.emp_id)})),n=!(i.length>=o().singleEmpl.minCountAnotherEmployees),{id:t.id,from:me(t.from),to:me(t.to),isViolation:n,countOtherEmployeesOnWork:i.length}}})),a=c.filter((function(e){return void 0!==e})),n(de(a)),n(ce(!1));case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t)),function(){n({type:oe})}}),[t]),Object(p.jsxs)(p.Fragment,{children:[!r&&!a&&Object(p.jsx)(j.a,{to:"/404"}),r?Object(p.jsx)(S,{count:5}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{children:d.name}),Object(p.jsx)("div",{children:d.phone}),Object(p.jsx)(ee,{rows:i,headerRow:c})]})]})},fe=function(e){var t=Object(j.h)().id;return Object(p.jsxs)(h.a,{maxWidth:"md",children:[Object(p.jsx)("div",{children:Object(p.jsx)(Z,{text:"back to homepage",toUrl:"/"})}),Object(p.jsx)("div",{children:Object(p.jsx)(be,{id:t})})]})},he=n(97),Oe=function(e){return Object(p.jsxs)(h.a,{maxWidth:"md",children:[Object(p.jsx)("div",{children:Object(p.jsx)(Z,{text:"back to homepage",toUrl:"/"})}),Object(p.jsx)(he.a,{variant:"h1",component:"h4",children:"page not found"})]})},ge=[{path:"/",exact:!0,component:K},{path:"/employees/:id",exact:!0,component:fe},{path:"/404",exact:!0,component:Oe},{component:Oe}],xe=function(e){return Object(p.jsx)(b,{routes:ge})},ye=n(25),_e=n(51),ve=Object(d.a)(),we=Object(ye.c)({empl:Y,singleEmpl:ue}),Ne=Object(ye.d)(we,Object(ye.a)(_e.a));c.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsxs)(l.a,{children:[Object(p.jsx)(a.a,{}),Object(p.jsx)(W.a,{store:Ne,children:Object(p.jsx)(s.a,{theme:ve,children:Object(p.jsx)(xe,{})})})]})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.99d09095.chunk.js.map